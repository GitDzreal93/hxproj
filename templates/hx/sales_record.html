{% extends "base/base_site.html" %}
{% load staticfiles %}
{% block title %} Table Dynamic {% endblock title %}

{% block stylesheets %}
{{ block.super }}
<link href="/static/vendors/datatables.net-bs/css/dataTables.bootstrap.min.css" rel="stylesheet">
<link href="/static/vendors/datatables.net-buttons-bs/css/buttons.bootstrap.min.css" rel="stylesheet">
<link href="/static/vendors/datatables.net-fixedheader-bs/css/fixedHeader.bootstrap.min.css" rel="stylesheet">
<link href="/static/vendors/datatables.net-responsive-bs/css/responsive.bootstrap.min.css" rel="stylesheet">
<link href="/static/vendors/datatables.net-scroller-bs/css/scroller.bootstrap.min.css" rel="stylesheet">
{% endblock stylesheets %}

{% block content %}
<div class="right_col" role="main">
	<div class="clearfix"></div>

	<div class="row">
		<div class="col-md-12 col-sm-12 col-xs-12">
			<div class="x_panel">
				<div class="x_title">
					<h2>查看销售明细</h2>
					<div class="clearfix"></div>
				</div>
				<div class="x_content">
					<div class="x_title">
						<h5>筛选器</h5>
						<div class="clearfix"></div>
					</div>
					<div class="row" style="margin-bottom:10px">
						<form class="form-label-left" role="form" action="{% url 'sales_record' %}" method="get">
							<div class="container">
								<div class="row">
									<div class="form-group col-lg-2">
										<div class="input-group">
											<span class="input-group-addon">商家代码</span>
											<input class="form-control" type="text">
										</div>
									</div>
									<div class="form-group col-lg-2">
										<div class="input-group">
											<span class="input-group-addon">商家名称</span>
											<input class="form-control" type="text">
										</div>
									</div>
									<div class="form-group col-lg-2">
										<div class="input-group">
											<span class="input-group-addon">门店代码</span>
											<input class="form-control" type="text">
										</div>
									</div>
									<div class="form-group col-lg-2">
										<div class="input-group">
											<span class="input-group-addon">门店名称</span>
											<input class="form-control" type="text">
										</div>
									</div>
									<div class="form-group col-lg-2">
										<div class="input-group">
											<span class="input-group-addon">产品型号</span>
											<input class="form-control" type="text">
										</div>
									</div>
									<div class="form-group col-lg-2 pull-right">
										<div class="input-group">
											<button type="submit" class="btn btn-success">查询</button>
										</div>
									</div>
									<br>
									<br>
									<div class="col-md-4">
										<span style="color: orange">温馨提示：列表默认选择昨天至今天的销量数据</span>
									</div>
									<br>
									<br>
									<div class="col-md-3">
										<div id="reportrange" class="pull-left"
											style="background: #fff; cursor: pointer; padding: 5px 10px; border: 1px solid #ccc">
											<i class="glyphicon glyphicon-calendar fa fa-calendar"></i>
											<span>November 1, 2015 - November 13, 2015</span> <b class="caret"></b>
										</div>
									</div>
								</div>
							</div>
						</form>
					</div>
					{#自动计算#}
					<div class="x_title">
						<h5>销量计算器</h5>
						<div class="clearfix"></div>
					</div>
					<div class="row" style="margin-bottom:10px">
						<div class="col-md-2">
							<span class="label label-default">商家总数</span>
							<span>{{ data.calc.business_calc }}</span>
						</div>
						<div class="col-md-2">
							<span class="label label-primary">门店总数</span>
							<span>{{ data.calc.store_calc }}</span>
						</div>
						<div class="col-md-2">
							<span class="label label-success">产品总数</span>
							<span>{{ data.calc.product_calc }}</span>
						</div>
						<div class="col-md-2">
							<span class="label label-info">零售总销量</span>
							<span>{{ data.calc.retail_sales_calc }} 件</span>
						</div>
						<div class="col-md-2">
							<span class="label label-warning">实际零售总额</span>
							<span>{{ data.calc.retail_price_calc }} 元</span>
						</div>
						<div class="col-md-2">
							<span class="label label-info">批发总销量</span>
							<span>{{ data.calc.wholesale_sales_calc }} 件</span>
						</div>
						<br>
						<br>
						<div class="col-md-2">
							<span class="label label-warning">实际批发总额</span>
							<span>{{ data.calc.wholesale_price_calc }} 元</span>
						</div>
						<div class="col-md-2">
							<span class="label label-info">工程总销量</span>
							<span>{{ data.calc.project_sales_calc }} 件</span>
						</div>
						<div class="col-md-2">
							<span class="label label-warning">实际工程总额</span>
							<span>{{ data.calc.project_price_calc }} 元</span>
						</div>
						<div class="col-md-2">
							<span class="label label-info">电商总销量</span>
							<span>{{ data.calc.online_sales_calc }} 件</span>
						</div>
						<div class="col-md-2">
							<span class="label label-warning">实际电商总额</span>
							<span>{{ data.calc.online_price_calc }} 元</span>
						</div>
					</div>
					<br><br>

					<table id="datatable" class="table table-striped table-bordered">
						<thead>
							<tr>
								<th>{{ data.title.business }}</th>
								<th>{{ data.title.store }}</th>
								<th>{{ data.title.product }}</th>
								<th>{{ data.title.retail }}</th>
								<th>{{ data.title.project }}</th>
								<th>{{ data.title.wholesale }}</th>
								<th>{{ data.title.online }}</th>
							</tr>
						</thead>
						
						{% for sales in  data.sales_lst %}
						<tr>
							<th>
								<span class="label label-default">{{ sales.business_name }}</span>
								<span class="label label-default">（{{ sales.business_code }}）</span>
							</th>
							<th>
								<span class="label label-primary">{{ sales.store_name }}</span>
								<span class="label label-primary">（{{ sales.store_code }}）</span>
							</th>
							<th>
								<span class="label label-success">{{ sales.product_mod }}</span>
							</th>
							<th>
								<span class="label label-info">零售销量：{{ sales.retail_sales }}件</span>
								<br><br>
								<span class="label label-info">零售金额：{{ sales.retail_sales }}元</span>
							</th>
							<th>
								<span class="label label-info">批发销量：{{ sales.wholesale_sales }}件</span>
								<br><br>
								<span class="label label-info">批发金额：{{ sales.wholesale_price }}元</span>

							</th>
							<th>
								<span class="label label-info">工程销量：{{ sales.project_sales }}件</span>
								<br><br>
								<span class="label label-info">工程金额：{{ sales.project_price }}元</span>
							</th>
							<th>
								<span class="label label-info">电商销量：{{ sales.online_sales }}件</span>
								<br><br>
								<span class="label label-info">电商金额：{{ sales.online_price }}元</span>
							</th>
						</tr>
						{% endfor %}
						<!-- {% for bussiness in  data.business_list %}
								<tr>
									<th>{{ bussiness.business_code }}</th>
									<th>{{ bussiness.business_name }}</th>
									<th>{{ bussiness.office }}</th>
									<th>{{ bussiness.company_type }}</th>
								</tr>
							{% endfor %} -->

						<tbody>


						</tbody>

					</table>
				</div>
			</div>
		</div>
	</div>
</div>

{% endblock content %}

{% block javascripts %}
{{ block.super }}
<!-- Datatables -->
<script src="/static/vendors/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="/static/vendors/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
<script src="/static/vendors/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
<script src="/static/vendors/datatables.net-buttons-bs/js/buttons.bootstrap.min.js"></script>
<script src="/static/vendors/datatables.net-buttons/js/buttons.flash.min.js"></script>
<script src="/static/vendors/datatables.net-buttons/js/buttons.html5.min.js"></script>
<script src="/static/vendors/datatables.net-buttons/js/buttons.print.min.js"></script>
<script src="/static/vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js"></script>
<script src="/static/vendors/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>
<script src="/static/vendors/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
<script src="/static/vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js"></script>
<script src="/static/vendors/datatables.net-scroller/js/dataTables.scroller.min.js"></script>
<script src="/static/vendors/jszip/dist/jszip.min.js"></script>
<script src="/static/vendors/pdfmake/build/pdfmake.min.js"></script>
<script src="/static/vendors/pdfmake/build/vfs_fonts.js"></script>
{% endblock javascripts %}